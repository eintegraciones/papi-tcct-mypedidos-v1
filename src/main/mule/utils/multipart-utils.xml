<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd">
	<sub-flow name="parquet-bytes-to-multipart" doc:id="3c77ffe7-af80-4c90-8cb4-89014467cebd" >
		<set-variable value="#[sizeOf(payload)]" doc:name="content_length" doc:id="c8251f97-e0d7-429c-b22f-ceeeb039a24b" variableName="content_length" />
		<set-variable value="#[%dw 2.0
import dw::module::Multipart
output application/json
---
Multipart::generateBoundary(25)]" doc:name="boundary" doc:id="a1a55d34-6674-4c56-9e41-c06e58076ff9" variableName="boundary" />
		<set-payload value='#[%dw 2.0
import dw::module::Multipart
input payload application/octet-stream
output multipart/form-data
---
{
	parts : {
		file : {
			headers: {
				"Content-Disposition": {
					name: "file",
					filename: vars.tabla as String ++ ".parquet",
					subtype: "form-data"
				}
			},
			content : payload
		}
	}
}]' doc:name="multipart" doc:id="7c4a14d2-3bbb-4ecd-85b4-182cd0fe3a54" />
	</sub-flow>
</mule>
